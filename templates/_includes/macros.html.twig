{% macro picture(slug, alt, size, aspect) %}
    {% if size|first == "w" %}
        {% set width = size|trim('w', 'left') %}
        {% set height = width / aspect %}
    {% elseif size|first == "h" %}
        {% set height = size|trim('h', 'left') %}
        {% set width = height * aspect %}
    {% elseif size|first == "l" %}
        {% if aspect > 1 %}
            {% set width = size|trim('l', 'left') %}
            {% set height = width / aspect %}
        {% else %}
            {% set height = size|trim('l', 'left') %}
            {% set width = height * aspect %}
        {% endif %}
    {% else %}
    {% endif %}
    <picture>
        {# TODO: Use webp #}
        {#        <source srcset="/photos/{{ size }}/{{ slug }}@2x.jpg 2x"#}
        {#                type="image/webp">#}
        <source srcset="/photos/{{ size }}/{{ slug }}@2x.jpg 2x"
                type="image/jpeg">
        <img width="{{width}}" height="{{height}}"
             src="/photos/{{ size }}/{{ slug }}.jpg" alt="{{ alt }}">
    </picture>
{% endmacro %}
